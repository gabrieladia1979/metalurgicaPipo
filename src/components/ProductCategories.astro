---
// src/components/ProductCategories.astro
const currentPath = Astro.url.pathname;
const isEnglish = currentPath.startsWith('/en');
const linkPrefix = isEnglish ? '/en' : '/es';

const familiesES = [
  {
    title: "Quiénes Somos",
    description: "Más de 50 años liderando la fabricación de repuestos para la industria del gas y petróleo.",
    items: ["Trayectoria y Calidad", "Infraestructura", "Nuestros Clientes"],
    image: "/docs/empresa.png",
    link: "/metalurgica-bergner",
    button: "CONOCER MÁS"
  },
  {
    title: "Nuestros Productos",
    description: "Catálogo completo de válvulas, aros y repuestos con calidad internacional.",
    items: ["Válvulas de Compresor", "Aros y Empaquetaduras", "Kits de reparación"],
    image: "/docs/valvulas.jpg",
    link: "/productos",
    button: "VER CATÁLOGO"
  },
  {
    title: "Servicios Técnicos",
    description: "Soluciones integrales de mantenimiento y reparación de componentes críticos.",
    items: ["Reacondicionamiento", "Mecanizado CNC", "Asistencia Técnica"],
    image: "/docs/para arreglar.jpg",
    link: "/servicio-tecnico",
    button: "VER SERVICIOS"
  }
];

const familiesEN = [
  {
    title: "About Us",
    description: "Over 50 years leading the manufacture of spare parts for the oil and gas industry.",
    items: ["History & Quality", "Infrastructure", "Our Clients"],
    image: "/docs/empresa.png",
    link: "/metalurgica-bergner",
    button: "LEARN MORE"
  },
  {
    title: "Our Products",
    description: "Complete catalog of valves, rings and spare parts with international quality.",
    items: ["Compressor Valves", "Rings and Packings", "Repair Kits"],
    image: "/docs/valvulas.jpg",
    link: "/productos",
    button: "VIEW CATALOG"
  },
  {
    title: "Technical Services",
    description: "Comprehensive solutions for maintenance and repair of critical components.",
    items: ["Reconditioning", "CNC Machining", "Technical Assistance"],
    image: "/docs/para arreglar.jpg",
    link: "/servicio-tecnico",
    button: "VIEW SERVICES"
  }
];

const families = isEnglish ? familiesEN : familiesES;

const txt = {
  catalog: isEnglish ? "Explore" : "Explorar",
  title: isEnglish ? "Welcome to Our Metallurgical Factory" : "Bienvenidos a Nuestra Fábrica Metalúrgica",
  subtitle: isEnglish 
    ? "We are leaders in the manufacture of metallurgical solutions, with over 50 years of experience dedicated to providing the highest quality and efficiency in each of our developments. We offer a wide range of custom solutions for specific applications. In addition, we have an engineering department available for advice and technical inquiries, ensuring the choice of the most suitable product for each need." 
    : "Somos líderes en la fabricación de soluciones metalúrgicas, con más de 50 años de experiencia dedicados a brindar la más alta calidad y eficiencia en cada uno de nuestros desarrollos. Ofrecemos una amplia gama de soluciones a medida para aplicaciones específicas. Además, contamos con un departamento de ingeniería disponible para asesoramiento y consultas técnicas, garantizando la elección del producto más adecuado para cada necesidad.",
};
---

<section class="py-24 bg-white">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <span class="text-bergner-red font-bold tracking-wider uppercase text-sm">{txt.catalog}</span>
      <h2 class="text-4xl md:text-5xl font-bold text-gray-900 mt-2 mb-6 uppercase tracking-tight">{txt.title}</h2>
      
      <div class="max-w-4xl mx-auto">
        <hr class="border-gray-200 mb-6" />
        <p class="text-lg text-gray-600 leading-relaxed text-justify px-4 md:px-12">
          {txt.subtitle}
        </p>
        <hr class="border-gray-200 mt-6" />
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-10">
      {families.map((family) => (
        <article class="group bg-gray-50 rounded-2xl overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
          <div class="h-64 overflow-hidden relative">
            <div class="absolute inset-0 bg-gray-900/10 group-hover:bg-gray-900/0 transition-colors z-10"></div>
            <img 
              src={family.image} 
              alt={family.title} 
              class="h-full w-full object-cover transition-transform duration-700 group-hover:scale-110" 
            />
          </div>

          <div class="p-8">
            <h3 class="text-2xl font-bold text-gray-900 mb-3 group-hover:text-bergner-red transition-colors">
              {family.title}
            </h3>
            <p class="text-gray-600 mb-6 leading-relaxed">
              {family.description}
            </p>

            <ul class="space-y-3 mb-8">
              {family.items.map((item) => (
                <li class="flex items-center text-gray-700">
                  <span class="w-1.5 h-1.5 bg-bergner-red rounded-full mr-3"></span>
                  {item}
                </li>
              ))}
            </ul>

            <a 
              href={`${linkPrefix}${family.link}`} 
              class="inline-flex items-center text-bergner-red font-bold tracking-wide hover:text-red-800 transition-colors"
            >
              {family.button}
              <svg class="w-5 h-5 ml-2 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
              </svg>
            </a>
          </div>
        </article>
      ))}
    </div>
  </div>
</section>
