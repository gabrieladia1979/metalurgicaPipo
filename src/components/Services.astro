---
// src/components/Services.astro

const currentPath = Astro.url.pathname;
const isEnglish = currentPath.startsWith('/en');

const servicesES = [
  {
    title: "Mecanizado CNC",
    description: "Tornería y fresado de alta precisión para piezas complejas y series de producción.",
    icon: "precision_manufacturing" 
  },
  {
    title: "Reparación de Válvulas",
    description: "Mantenimiento y rectificación de válvulas industriales bajo normas de seguridad.",
    icon: "build" 
  },
  {
    title: "Soldadura Especializada",
    description: "Procesos TIG/MIG para acero inoxidable, aluminio y aleaciones especiales.",
    icon: "waves"
  },
  {
    title: "Desarrollo de Prototipos",
    description: "Ingeniería inversa y fabricación de piezas únicas según muestra o plano.",
    icon: "engineering"
  }
];

const servicesEN = [
  {
    title: "CNC Machining",
    description: "High precision turning and milling for complex parts and production series.",
    icon: "precision_manufacturing" 
  },
  {
    title: "Valve Repair",
    description: "Maintenance and rectification of industrial valves under safety standards.",
    icon: "build" 
  },
  {
    title: "Specialized Welding",
    description: "TIG/MIG processes for stainless steel, aluminum and special alloys.",
    icon: "waves"
  },
  {
    title: "Prototype Development",
    description: "Reverse engineering and manufacturing of unique parts according to sample or blueprint.",
    icon: "engineering"
  }
];

const services = isEnglish ? servicesEN : servicesES;

const txt = {
  title: isEnglish ? 'Our Services' : 'Nuestros Servicios',
  subtitle: isEnglish ? 'Integral metallurgical solutions adapted to the needs of modern industry.' : 'Soluciones metalúrgicas integrales adaptadas a las necesidades de la industria moderna.'
};
---

<section id="servicios" class="py-20 bg-gray-50 font-sans">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    
    <div class="text-center mb-16">
      <h2 class="text-3xl md:text-4xl font-bold text-bergner-red mb-4">
        {txt.title}
      </h2>
      <p class="text-gray-600 max-w-2xl mx-auto text-lg">
        {txt.subtitle}
      </p>
    </div>

    {/* Featured Service Section */}
    <div class="mb-20 bg-white rounded-xl shadow-lg overflow-hidden">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center p-8 md:p-12">
        {/* Imagen arriba en mobile, izquierda en desktop */}
        <div class="order-first md:order-first flex flex-col gap-4">
          <div class="grid grid-cols-2 gap-4">
            <div class="relative group">
              <img src="/docs/para arreglar.jpg" alt="Antes / Before" class="w-full h-48 md:h-64 object-cover rounded-lg shadow-md border border-gray-200" />
              <div class="absolute inset-0 bg-black/40 group-hover:bg-transparent transition-colors rounded-lg"></div>
              <span class="absolute bottom-2 left-2 bg-black/70 text-white text-xs font-bold px-2 py-1 rounded backdrop-blur-sm">ANTES / BEFORE</span>
            </div>
            <div class="relative group">
              <img src="/docs/nueva.jpg" alt="Después / After" class="w-full h-48 md:h-64 object-cover rounded-lg shadow-md border-2 border-green-500/20" />
              <span class="absolute bottom-2 left-2 bg-bergner-red text-white text-xs font-bold px-2 py-1 rounded shadow-lg">AHORA / NOW</span>
            </div>
          </div>
          <p class="text-center text-sm text-gray-500 italic bg-gray-50 py-2 rounded-lg">
            {isEnglish ? 'Full restoration: 100% functionality guaranteed' : 'Restauración completa: Funcionalidad 100% garantizada'}
          </p>
        </div>

        {/* Texto abajo en mobile, derecha en desktop */}
        <div class="order-last md:order-last">
          <h3 class="text-2xl md:text-3xl font-bold text-bergner-red mb-6">
            Reparación de Válvulas y Mantenimiento de Compresores
          </h3>
          
          <div class="space-y-4 text-gray-700 mb-8">
            <p class="font-semibold text-lg">
              {isEnglish 
                ? 'We offer valve repair service, recovering main parts (covers and seats) and replacing all wear parts (discs, dampers and springs).'
                : 'Ofrecemos el servicio de reparación de válvulas, recuperando las piezas principales (tapas y asientos) reemplazando la totalidad de los repuestos de desgaste (discos, amortiguadores y resortes).'}
            </p>
            
            <div>
              <h4 class="font-bold text-bergner-red mb-3">
                {isEnglish ? 'VALVE REPAIR SERVICE:' : 'SERVICIO DE REPARACIÓN DE VÁLVULAS:'}
              </h4>
              <p class="mb-2 text-sm">
                {isEnglish 
                  ? 'Our service is performed according to the following procedure ensuring reconditioned valves are totally equivalent to new ones in quality and lifespan:'
                  : 'Nuestro servicio se realiza de acuerdo al siguiente procedimiento que asegura que las válvulas reacondicionadas sean totalmente equivalentes a las nuevas en calidad y vida útil:'}
              </p>
              <ul class="space-y-2 text-sm list-inside">
                <li class="pl-2 border-l-2 border-bergner-red">
                  {isEnglish ? 'Disassembly and cleaning of valves.' : 'Desarme y limpieza de las válvulas.'}
                </li>
                <li class="pl-2 border-l-2 border-bergner-red">
                  {isEnglish ? 'Seats and covers undergo a blasting process.' : 'Los asientos y tapas son sometidos a un proceso de blasting.'}
                </li>
                <li class="pl-2 border-l-2 border-bergner-red">
                  {isEnglish ? 'Internal consumable components, membranes, plates and springs are removed.' : 'Se retiran los componentes internos consumibles, membranas, platillos y resortes.'}
                </li>
                <li class="pl-2 border-l-2 border-bergner-red">
                  {isEnglish ? 'Machining process for seats and covers under original specifications of tolerance, parallelism and flatness.' : 'Proceso de mecanizado para los asientos y tapas bajo las especificaciones originales de tolerancia, paralelismo y planitud.'}
                </li>
                <li class="pl-2 border-l-2 border-bergner-red">
                  {isEnglish ? 'Valve assembly, replacing all internal components with new parts according to manufacturer specifications.' : 'Montaje de las válvulas, reemplazando la totalidad de sus componentes internos por piezas nuevas de acuerdo a las especificaciones del fabricante.'}
                </li>
                <li class="pl-2 border-l-2 border-bergner-red">
                  {isEnglish ? 'Leak and function tests are performed, then packed for dispatch.' : 'Se realizan pruebas de estanqueidad y funcionamiento, luego son embaladas para su despacho.'}
                </li>
              </ul>
            </div>

            <p class="text-sm italic text-gray-600 border-l-4 border-yellow-400 pl-4 py-2 bg-yellow-50 rounded-r">
              {isEnglish 
                ? 'The process takes seven days, although in case of urgency the term can be reduced to two days. To achieve these times we always keep in stock internal spare parts, membranes, dampers, separators, plates and springs.'
                : 'El proceso se realiza en siete días, aunque, en caso de urgencia el plazo puede reducirse a dos días. Para lograr estos tiempos siempre mantenemos en stock los repuestos internos, membranas, amortiguadores, separadores, platillos y resortes.'}
            </p>

            <div class="mt-6 pt-6 border-t border-gray-100">
              <h4 class="font-bold text-bergner-red mb-2">
                {isEnglish ? 'COMPRESSOR MAINTENANCE SERVICE:' : 'SERVICIO DE MANTENIMIENTO DE COMPRESORES:'}
              </h4>
              <p class="text-gray-700">
                {isEnglish 
                  ? 'Metalúrgica Bergner also offers maintenance service for any type of piston compressors.'
                  : 'Metalúrgica Bergner también ofrece el servicio para el mantenimiento de cualquier tipo de compresores a pistón.'}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    {/* Services Grid */}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
      {services.map((service) => (
        <div class="bg-white p-8 rounded-xl shadow-sm border border-gray-100 hover:shadow-lg hover:-translate-y-1 transition-all duration-300 group">
          
          <div class="w-14 h-14 rounded-lg bg-bergner-red/10 flex items-center justify-center mb-6 group-hover:bg-bergner-red transition-colors duration-300">
            <span class="material-symbols-outlined text-3xl text-bergner-red group-hover:text-white transition-colors">
              {service.icon}
            </span>
          </div>

          <h3 class="text-xl font-bold text-gray-900 mb-3 group-hover:text-bergner-red transition-colors">
            {service.title}
          </h3>
          
          <p class="text-gray-600 leading-relaxed text-sm">
            {service.description}
          </p>
        </div>
      ))}
    </div>
  </div>
</section>