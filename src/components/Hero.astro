---
import site from '../data/site.json';
// src/components/Hero.astro
const currentPath = Astro.url.pathname;
const isEnglish = currentPath.startsWith('/en');
const linkPrefix = isEnglish ? '/en' : '/es';

const texts = {
  tag: isEnglish ? 'Engineering & Metallurgical Precision' : 'Ingeniería y Precisión Metalúrgica',
  title: isEnglish ? 'High Performance Industrial Solutions' : 'Soluciones Industriales de Alto Rendimiento',
  description: isEnglish 
    ? 'Manufacture of spare parts for reciprocating compressors. Over 50 years of experience offering quality, reliability and commitment in every project.' 
    : 'Con más de 50 años en el mercado, fabricamos repuestos metalmecánicos para compresores a pistón, ofreciendo calidad, confiabilidad y compromiso en cada proyecto.',
  button: isEnglish ? 'View Products' : 'Ver Productos',
  whatsapp: isEnglish ? 'Contact via WhatsApp' : 'Contactar por WhatsApp',
  stats: {
    exp: isEnglish ? 'Years Experience' : 'Años de Trayectoria',
    mat: isEnglish ? 'High Quality' : 'Alta Calidad',
    clients: isEnglish ? 'Satisfied Clients' : 'Clientes Satisfechos'
  }
};

const bgImages = [
  '/carrusel/image.png',
  '/carrusel/image%20copy.png',
  '/carrusel/Gemini_Generated_Image_wb75o1wb75o1wb75.png'
];
---

<section class="relative w-full h-[700px] md:h-[800px] flex items-center justify-center overflow-hidden bg-gray-900">
  
  {/* Fondo con carrusel de imágenes nuevas */}
  <div class="absolute inset-0 z-0">
    {bgImages.map((src, idx) => (
      <img
        src={src}
        alt={`Fondo industrial ${idx+1}`}
        class={`absolute inset-0 w-full h-full object-cover opacity-40 scale-105 animate-slow-zoom carousel-frame animate-carousel${idx}`}
        loading={idx === 0 ? 'eager' : 'lazy'}
      />
    ))}
  </div>

  {/* Gradiente Overlay */}
  <div class="absolute inset-0 bg-gradient-to-r from-gray-900 via-gray-900/80 to-transparent z-10"></div>

  {/* Contenido */}
  <div class="relative z-20 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
    <div class="grid lg:grid-cols-2 gap-12 items-center">
      
      {/* Texto */}
      <div class="animate-fade-in-up">
        <div class="flex items-center gap-2 mb-6">
          <span class="h-1 w-12 bg-bergner-red"></span>
          <span class="text-gray-300 font-medium tracking-widest text-sm uppercase">
            {texts.tag}
          </span>
        </div>
        
        <h1 class="text-5xl md:text-6xl lg:text-7xl font-bold text-white leading-tight mb-8">
          {isEnglish ? 'High Performance' : 'Soluciones'} <br/>
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-400">
            {isEnglish ? 'Industrial Solutions' : 'Industriales'}
          </span>
        </h1>
        
        <p class="text-xl text-gray-300 mb-10 leading-relaxed max-w-lg border-l-4 border-bergner-red pl-6">
          {texts.description}
        </p>

        <div class="flex flex-col sm:flex-row gap-5">
          <a 
            href={`${linkPrefix}/productos`}
            class="group relative overflow-hidden bg-bergner-red text-white px-8 py-4 rounded-lg font-bold text-lg shadow-lg shadow-bergner-red/30 transition-all hover:scale-105 hover:shadow-bergner-red/50"
          >
            <span class="relative z-10 flex items-center gap-2">
              {texts.button}
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg>
            </span>
          </a>
          
          <a 
            href={`https://wa.me/${site.whatsappNumber}?text=${encodeURIComponent('Hola, me gustaría obtener más información sobre sus productos...')}`}
            target="_blank"
            rel="noopener noreferrer"
            class="group flex items-center justify-center gap-2 border border-white/30 text-white hover:bg-white/10 backdrop-blur-sm px-8 py-4 rounded-lg font-bold transition-all text-lg"
          >
            <span>{texts.whatsapp}</span>
          </a>
        </div>

        <div class="mt-16 grid grid-cols-3 gap-8 py-8 border-t border-white/10">
          <div>
            <p class="text-4xl font-bold text-white mb-1">100%</p>
            <p class="text-gray-400 text-sm uppercase tracking-wider">{texts.stats.mat}</p>
          </div>
          <div>
            <p class="text-4xl font-bold text-white mb-1">50+</p>
            <p class="text-gray-400 text-sm uppercase tracking-wider">{texts.stats.exp}</p>
          </div>
          <div>
            <p class="text-4xl font-bold text-white mb-1">ISO</p>
            <p class="text-gray-400 text-sm uppercase tracking-wider">9001:2015</p>
          </div>
        </div>
      </div>

      {/* Elemento Visual Derecha (opcional, para balancear) */}
      <div class="hidden lg:block relative">
        <div class="absolute -inset-4 bg-bergner-red/20 rounded-full blur-3xl animate-pulse"></div>
        {/* Aquí podrías poner una imagen flotante si tuvieras una silueta de producto precisa, o dejarlo vacío para que se vea el fondo limpio */}
      </div>

    </div>
  </div>
</section>

<style>
  @keyframes slow-zoom {
    0% { transform: scale(1); }
    100% { transform: scale(1.1); }
  }
  .animate-slow-zoom {
    animation: slow-zoom 20s infinite alternate ease-in-out;
  }
  @keyframes fade-in-up {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in-up {
    animation: fade-in-up 1s ease-out;
  }

  /* Carrusel más suave: crossfade + ken-burns leve */
  @keyframes carousel-fade {
    0% { opacity: 0; transform: scale(1.02) translateX(12px); }
    12% { opacity: 1; transform: scale(1.03) translateX(0); }
    38% { opacity: 1; transform: scale(1.05) translateX(-6px); }
    55% { opacity: 0; transform: scale(1.06) translateX(-12px); }
    100% { opacity: 0; transform: scale(1.06) translateX(-12px); }
  }
  .carousel-frame {
    opacity: 0;
    will-change: opacity, transform;
    filter: saturate(1.05) contrast(1.02);
  }
  .animate-carousel0 { animation: carousel-fade 18s infinite ease-in-out; }
  .animate-carousel1 { animation: carousel-fade 18s infinite ease-in-out; animation-delay: 6s; }
  .animate-carousel2 { animation: carousel-fade 18s infinite ease-in-out; animation-delay: 12s; }

  @keyframes carousel-dot {
    0%,12% { transform: scale(1.2); opacity: 1; }
    38% { transform: scale(1.05); opacity: 0.8; }
    55%,100% { transform: scale(1); opacity: 0.4; }
  }
  .animate-carousel-dot {
    animation: carousel-dot 18s infinite ease-in-out;
  }
</style>
